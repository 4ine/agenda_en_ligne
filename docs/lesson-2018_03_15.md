# Cours du 15/03/2018

### Requête préparée

## Template de requête sql

Au lieu de créer une variable pour stocker le template de requête sql, vous pouvez directement passer votre template à la méthode **prepare()**

Exemple sans création de variable
```php
 $clientSth = $connexion->prepare("insert into clients (nom, prenom, genre, date_de_naissance, email, telephone)
 values (:nom, :prenom, :genre, :date_de_naissance, :email, :telephone)");
}
```
Exemple avec la création d 'une variable
```php
$requeteClient = "insert into clients (nom, prenom, genre, date_de_naissance, email, telephone)
values (:nom, :prenom, :genre, :date_de_naissance, :email, :telephone)";

 $clientSth = $connexion->prepare($requeteClient);
}
```


## Différentes façon lier les paramètres aux noms

Vous pouvez lier vos données aux noms avec les méthodes **bindParam** ou **bindValue**

Exemple

```sql
$requeteClient = "insert into clients (nom, prenom, genre, date_de_naissance, email, telephone)
values (:nom, :prenom, :genre, :date_de_naissance, :email, :telephone)";

 $clientSth = $connexion->prepare($requeteClient);

 $clientSt->binParam('nom', $_POST['nom']);
 $clientSt->binParam('prenom', $_POST['prenom']);
 $clientSt->binParam('genre', $_POST['genre']);
 $clientSt->binParam('date_de_naissance', $_POST['date_de_naissance']);
 $clientSt->binParam('email', $_POST['email']);
 $clientSt->binParam('telephone', $_POST['telephone']);

 $clientSt->execute();
```

Ou vous pouvez les passer vos données directement dans la méthode execute. Attention toutes les valeurs seront traitées comme des constantes **PDO::PARAM_STR**

```sql
$requeteClient = "insert into clients (nom, prenom, genre, date_de_naissance, email, telephone)
values (:nom, :prenom, :genre, :date_de_naissance, :email, :telephone)";

 $clientSth = $connexion->prepare($requeteClient);

 $clientSth->execute([
	 'nom' => $_POST['nom'],
	 'prenom' => $_POST['prenom'],
	 'genre' => $_POST['genre'],
	 'date_de_naissance' => $_POST['nomdate_de_naissance'],
	 'email' => $_POST['email'],
	 'telephone' => $_POST['telephone'],
 ]);
```

## Récupérer les résultats d'une requêtable



## Récupérer les erreurs


## Les plus hors scope du cours

### formulaire

## Mettre à jour l'action du form lors d'une mise à jour

## Ajouter l'information dans les champs text

## Ajouter l'information dans les champs select
